# ç³»ç»Ÿå‚æ•°
port: 7890                        # HTTPä»£ç†ç«¯å£
socks-port: 7891                  # SOCKSä»£ç†ç«¯å£
redir-port: 7892                  # é€æ˜ä»£ç†ç«¯å£ï¼ˆfor Linux or MacOSï¼‰ä¸èƒ½æ›´æ”¹
mixed-port: 7893                  # é›†æˆç«¯å£ï¼Œhttpä¸socks
#authentication:                   # éªŒè¯
#  - "user:user"                 # httpä¸socksçš„è´¦å·è·Ÿå¯†ç ï¼Œæ¨èä½¿ç”¨
allow-lan: true                   # å…è®¸å±€åŸŸç½‘è¿æ¥
mode: Script                      # Rule or Script    # å·¥ä½œæ¨¡å¼ï¼ˆæœ‰Globalå…¨å±€ï¼ŒRuleè§„åˆ™ï¼ŒDirectç›´è¿,Scriptè„šæœ¬ï¼‰
log-level: info                   # æ—¥å¿—çº§åˆ«ï¼ˆinfo / warning / error / debug / silentï¼‰
ipv6: false                       # å‡
external-controller: 0.0.0.0:9090 # å¤–éƒ¨æ§åˆ¶é¢æ¿ç›‘å¬ç«¯å£
external-ui: dashboard            # å¤–éƒ¨æ§åˆ¶é¢æ¿ä»ªè¡¨æ¿
secret: ""                        # dashboardé¢æ¿çš„å¯†ç ï¼ŒåŒæ—¶ä¹Ÿæ˜¯tracingçš„å¯†ç 
interface-name: eth_n            # ip a æŸ¥çœ‹æ¥å£åç§°ï¼Œç¡®è®¤ä¸€è‡´ 
profile:                          # æè¿°
  store-selected: true            # ç­–ç•¥ç»„é€‰æ‹©ç¼“å­˜å¼€å…³ï¼Œæ‰“å¼€åå¯ä»¥ä¿å­˜ç­–ç•¥ç»„é€‰æ‹©ï¼Œé‡å¯ä¸ä¼šå›å¤é»˜è®¤
  tracing: true                   # tracingå¼€å…³ï¼Œå¿…é¡»æ‰“å¼€æ‰èƒ½å¯¹æ¥tracing
# å®éªŒæ€§åŠŸèƒ½
experimental:
  ignore-resolve-fail: true
# TUNè®¾ç½®
tun:
  enable: true         
  stack: gvisor
  dns-hijack:
    - tcp://8.8.8.8:53
    - tcp://8.8.4.4:53
    - 8.8.8.8:53
    - 8.8.8.8:53
# DNSè®¾ç½®  
dns:
  enable: true
  ipv6: false
  listen: 127.0.0.1:5352         # DNSç›‘å¬ç«¯å£!!!clashä¸‹ï¼Œæ­¤å¤„ä¸èƒ½æ”¹ï¼Œåˆ‡è®°!!!!
  # DNSè§£ææ¨¡å¼ï¼ˆredir-host # or fake-ipï¼‰ï¼Œè¿™é‡Œé‡ç‚¹è§£é‡Šä¸€ä¸‹ï¼š
  # redir-hostä¸ºçœŸå®IPæ¨¡å¼ï¼Œéœ€è¦è®¾ç½®nameserverï¼ˆå›½å†…ï¼‰å’Œfallbackï¼ˆå›½å¤–ï¼‰ä¸¤ç»„DNSï¼Œå½“è®¾å¤‡å‘èµ·DNSè¯·æ±‚ï¼ŒCLASHä¼šåŒæ—¶å‘ä¸¤ç»„é‡Œé¢æ‰€æœ‰æœåŠ¡å™¨å‘èµ·è¯·æ±‚ï¼Œç„¶åé¦–å…ˆæ‹¿nameserverä¸­æœ€å¿«è¿”å›çš„ç»“æœå»åŒ¹é…è§„åˆ™ï¼Œä½¿ç”¨GEOIPåˆ¤æ–­æ­¤IPçš„æ‰€å±åŒºåŸŸï¼Œå¦‚æœå±äºå›½å†…ï¼ˆCNï¼‰æˆ–ä¿ç•™åœ°å€åˆ™ç›´æ¥å“åº”ç»™å®¢æˆ·ç«¯ï¼Œå…¶ä»–æƒ…å†µåˆ™æŠŠfallbackä¸­çš„ç»“æœå“åº”ç»™å®¢æˆ·ç«¯
  # fake-ipåˆ™ç›¸åï¼Œå½“clashæ”¶åˆ°è¯·æ±‚ï¼Œä¼šç›´æ¥è¿”å›ä¸€ä¸ª198.18.0.1/16çš„å‡IPç»™è®¾å¤‡ï¼ŒåŒæ—¶ Clash ç»§ç»­è§£æåŸŸåè§„åˆ™å’Œ IP è§„åˆ™ï¼Œè€Œä¸”å¦‚æœ Clash DNS åŒ¹é…åˆ°äº†åŸŸåè§„åˆ™ã€åˆ™ä¸éœ€è¦å‘ä¸Šæ¸¸ DNS è¯·æ±‚ï¼ŒClash å·²ç»å¯ä»¥ç›´æ¥å°†è¿æ¥å‘ç»™ä»£ç†æœåŠ¡å™¨ï¼ŒèŠ‚çœäº† Clash DNS å‘ä¸Šæ¸¸ DNS è¯·æ±‚è§£æ
  default-nameserver:
    - 223.5.5.5
    - 223.6.6.6
    - 8.8.8.8
    - 8.8.4.4
  enhanced-mode: fake-ip         # ç†è®ºä¸Šæ¥è¯´ï¼Œfake-ipå…·æœ‰æ›´å¥½çš„å“åº”é€Ÿåº¦è·ŸæŠ—æ±¡æŸ“èƒ½åŠ›ï¼ˆä¸»è¦è¿˜å¾—çœ‹è§„åˆ™ï¼‰ã€‚ç”±äºç¯å¡”æå‰åˆ†æµäº†å›½å†…å¤–æµé‡ï¼Œå›½å†…æµé‡ä¸ç»è¿‡clashï¼Œæ‰€ä»¥é€‰æ‹©fake-ipå¯ä»¥å¾—åˆ°æ›´å¥½çš„æ•ˆæœï¼Œå½“ç„¶ï¼Œè¿˜æ˜¯å¾—çœ‹è§„åˆ™å®Œä¸å®Œæ•´ã€‚æœ‰éœ€è¦è¿”å›çœŸå®IPçš„å¯ä»¥é€‰æ‹©redir-hostï¼Œè€å®è¯´ä¸¤ç§DNSæ¨¡å¼åœ¨å®é™…ä½“éªŒä¸­å·®åˆ«ä¸å¤§
  fake-ip-range: 198.19.0.1/16   # ipèŒƒå›´
  use-hosts: true                # å¼€å¯
  fake-ip-filter:                # fake-ipç™½åå•ï¼Œå¯¹äºæœ‰éœ€è¦è¿”å›çœŸå®IPåˆæƒ³ç”¨fake-ipçš„ï¼Œå¯å‚ç…§ä»¥ä¸‹æ ¼å¼æŠŠåŸŸååŠ è¿›å»
    - msftconnecttest.com
    - "*.msftconnecttest.com"
    - msftncsi.com
    - "*.msftncsi.com"
    - '.lan'
    - localhost.ptlogin2.qq.com    
    - '.srv.nintendo.net'   
    - '.stun.playstation.net'   
    - 'xbox.*.microsoft.com'    
    - '.xboxlive.com'
  nameserver:                    # DNSæœåŠ¡å™¨ï¼ˆå›½å†…ï¼‰ï¼Œæ­¤å¤„å»ºè®®åªå¡«ä¸€ä¸ªé€Ÿåº¦æœ€å¿«çš„DNSå°±å¯ä»¥äº†
    - 119.29.29.29
    - 119.28.28.28
    - 223.5.5.5
    - 223.6.6.6
    - 180.76.76.76
    - 1.2.4.8
# ä»¥ä¸‹å°±æ˜¯ä»£ç†ï¼Œä»£ç†é›†ï¼ˆéœ€æœºåœºæ”¯æŒï¼‰ï¼Œç­–ç•¥ç»„è®¾ç½®ã€‚è¯·è‡ªå·±è§‚å¯Ÿï¼Œæ³¨æ„ä¹‹é—´çš„å¯¹åº”å…³ç³»!
# ä»£ç†é›†è®¾ç½®    
proxy-providers:
  ğŸ‡­ğŸ‡° é¦™æ¸¯:                   # ä»£ç†é›†åç§°
    type: http                   # ä»£ç†é›†ç±»å‹ï¼Œæœ‰httpï¼ˆç½‘ç»œåœ°å€ï¼‰è·Ÿfileï¼ˆæœ¬åœ°ï¼‰ä¸¤ç§æ ¼å¼
    path: ./ğŸ‡­ğŸ‡° é¦™æ¸¯.yaml     # ä»£ç†é›†æœ¬åœ°è·¯å¾„
    url: https://dler.cloud/subscribe/token?protocols=ss&list=clash&match=é¦™æ¸¯
    interval: 28800             # è‡ªåŠ¨æ£€æµ‹æ—¶é—´ï¼Œå•ä½ä¸ºç§’ï¼Œæ„æ€å°±æ˜¯æ¯28800æ›´æ–°ä¸€æ¬¡
    health-check:                # çŠ¶æ€æ£€æµ‹
      enable: true               # å¼€å¯
      url: http://cp.cloudflare.com/generate_204  # æ£€æµ‹åœ°å€ï¼Œæ¯600ç§’ä»£ç†é›†é‡Œé¢çš„èŠ‚ç‚¹å‘æ£€æµ‹åœ°å€åšä¸€æ¬¡è¿é€šæ€§æµ‹è¯•
      interval: 300              # è‡ªåŠ¨æ£€æµ‹æ—¶é—´ï¼Œå•ä½ä¸ºç§’
  ğŸ‡°ğŸ‡· éŸ©å›½:
    type: http
    path: ./ğŸ‡°ğŸ‡· éŸ©å›½.yaml
    url: https://dler.cloud/subscribe/token?protocols=ss&list=clash&match=éŸ©å›½
    interval: 28800
    health-check:
      enable: true
      url: http://cp.cloudflare.com/generate_204
      interval: 300
  ğŸ‡ºğŸ‡¸ ç¾å›½:
    type: http
    path: ./ğŸ‡ºğŸ‡¸ ç¾å›½.yaml
    url: https://dler.cloud/subscribe/token?protocols=ss&list=clash&match=ç¾å›½
    interval: 28800
    health-check:
      enable: true
      url: http://cp.cloudflare.com/generate_204
      interval: 300 
  ğŸ‡¯ğŸ‡µ æ—¥æœ¬:
    type: http
    path: ./ğŸ‡¯ğŸ‡µ æ—¥æœ¬.yaml
    url: https://dler.cloud/subscribe/token?protocols=ss&list=clash&match=æ—¥æœ¬
    interval: 28800
    health-check:
      enable: true
      url: http://cp.cloudflare.com/generate_204
      interval: 300          
  ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡:
    type: http
    path: ./ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡.yaml
    url: https://dler.cloud/subscribe/token?protocols=ss&list=clash&match=æ–°åŠ å¡
    interval: 28800
    health-check:
      enable: true
      url: http://cp.cloudflare.com/generate_204
      interval: 300   
  ğŸ‡¨ğŸ‡³ å°æ¹¾:
    type: http
    path: ./ğŸ‡¨ğŸ‡³ å°æ¹¾.yaml
    url: https://dler.cloud/subscribe/token?protocols=ss&list=clash&match=å°æ¹¾
    interval: 28800
    health-check:
      enable: true
      url: http://cp.cloudflare.com/generate_204
      interval: 600          
# ç­–ç•¥ç»„
proxy-groups:
  - name: ğŸ“¶ å¸¦å®½æµ‹é€Ÿ
    type: select
    proxies:
      - ğŸ“¡ ç›´è¿å›½å†…
    use:  
      - ğŸ‡­ğŸ‡° é¦™æ¸¯                      #å¼•ç”¨ï¼ˆä»£ç†é›†æ–‡ä»¶ï¼‰                          
      - ğŸ‡°ğŸ‡· éŸ©å›½
      - ğŸ‡ºğŸ‡¸ ç¾å›½
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬ 
      - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡
      - ğŸ‡¨ğŸ‡³ å°æ¹¾
  - name: ğŸŒ è°·æ­ŒæœåŠ¡
    type: select
    proxies:
      - ğŸ‡­ğŸ‡° é¦™æ¸¯                      #å¼•ç”¨ï¼ˆä»£ç†é›†æ–‡ä»¶ï¼‰
      - ğŸ‡°ğŸ‡· éŸ©å›½
      - ğŸ‡ºğŸ‡¸ ç¾å›½
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬ 
      - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡
      - ğŸ‡¨ğŸ‡³ å°æ¹¾ 
      - ğŸ“¡ ç›´è¿å›½å†…    
  - name: ğŸ’¬ å³æ—¶é€šè®¯
    type: select
    proxies:
      - ğŸ‡ºğŸ‡¸ ç¾å›½
      - ğŸ‡­ğŸ‡° é¦™æ¸¯                      #å¼•ç”¨ï¼ˆä»£ç†é›†æ–‡ä»¶ï¼‰
      - ğŸ‡°ğŸ‡· éŸ©å›½
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬ 
      - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡
      - ğŸ‡¨ğŸ‡³ å°æ¹¾ 
      - ğŸ“¡ ç›´è¿å›½å†…  
  - name: ğŸ¦ Netflix
    type: select
    proxies:
      - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬
      - ğŸ‡¨ğŸ‡³ å°æ¹¾
      - ğŸ‡­ğŸ‡° é¦™æ¸¯                      #å¼•ç”¨ï¼ˆä»£ç†é›†æ–‡ä»¶ï¼‰
      - ğŸ‡°ğŸ‡· éŸ©å›½
      - ğŸ‡ºğŸ‡¸ ç¾å›½
      - ğŸ“¡ ç›´è¿å›½å†…  
  - name: â–¶ï¸ Youtube
    type: select
    proxies:
      - ğŸ‡­ğŸ‡° é¦™æ¸¯                      #å¼•ç”¨ï¼ˆä»£ç†é›†æ–‡ä»¶ï¼‰
      - ğŸ‡°ğŸ‡· éŸ©å›½
      - ğŸ‡ºğŸ‡¸ ç¾å›½
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬
      - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡
      - ğŸ‡¨ğŸ‡³ å°æ¹¾
      - ğŸ“¡ ç›´è¿å›½å†…  
  - name: ğŸ“º æ¸¯æ¾³å°åŒº
    type: select
    proxies:
      - ğŸ‡­ğŸ‡° é¦™æ¸¯                      #å¼•ç”¨ï¼ˆä»£ç†é›†æ–‡ä»¶ï¼‰
      - ğŸ‡°ğŸ‡· éŸ©å›½
      - ğŸ‡ºğŸ‡¸ ç¾å›½
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬
      - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡
      - ğŸ‡¨ğŸ‡³ å°æ¹¾
      - ğŸ“¡ ç›´è¿å›½å†…  
  - name: ğŸ Disney
    type: select
    proxies:
      - ğŸ‡­ğŸ‡° é¦™æ¸¯                      #å¼•ç”¨ï¼ˆä»£ç†é›†æ–‡ä»¶ï¼‰
      - ğŸ‡°ğŸ‡· éŸ©å›½
      - ğŸ‡ºğŸ‡¸ ç¾å›½
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬
      - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡
      - ğŸ‡¨ğŸ‡³ å°æ¹¾
      - ğŸ“¡ ç›´è¿å›½å†…  
  - name: ğŸ å›½é™…åª’ä½“
    type: select
    proxies:
      - ğŸ‡­ğŸ‡° é¦™æ¸¯                      #å¼•ç”¨ï¼ˆä»£ç†é›†æ–‡ä»¶ï¼‰
      - ğŸ‡°ğŸ‡· éŸ©å›½
      - ğŸ‡ºğŸ‡¸ ç¾å›½
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬
      - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡
      - ğŸ‡¨ğŸ‡³ å°æ¹¾
      - ğŸ“¡ ç›´è¿å›½å†…  
  - name: ğŸŒ å›½é™…äº’è”
    type: select
    proxies:
      - ğŸ‡­ğŸ‡° é¦™æ¸¯                      #å¼•ç”¨ï¼ˆä»£ç†é›†æ–‡ä»¶ï¼‰
      - ğŸ‡°ğŸ‡· éŸ©å›½
      - ğŸ‡ºğŸ‡¸ ç¾å›½
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬
      - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡
      - ğŸ‡¨ğŸ‡³ å°æ¹¾
      - ğŸ“¡ ç›´è¿å›½å†…     
  - name: ğŸ¥ å›½å†…åª’ä½“
    type: select
    proxies:
      - ğŸ“¡ ç›´è¿å›½å†…
      - ğŸŒ å›½é™…äº’è”
  - name: ğŸ“§ å¾®è½¯æœåŠ¡
    type: select
    proxies:    
      - ğŸŒ å›½é™…äº’è”
      - ğŸ“¡ ç›´è¿å›½å†…
  - name: ğŸ“± è‹¹æœæœåŠ¡
    type: select
    proxies: 
      - ğŸ“¡ ç›´è¿å›½å†…
      - ğŸŒ å›½é™…äº’è”
  - name: ğŸ® æ¸¸æˆå¹³å°
    type: select
    proxies:
      - ğŸ“¡ ç›´è¿å›½å†…    
      - ğŸŒ å›½é™…äº’è”
  - name: â›”ï¸ æ‹¦æˆªå¹¿å‘Š
    type: select
    proxies:
      - ğŸš« æ‹¦æˆªé˜»æ–­
      - ğŸ“¡ ç›´è¿å›½å†…
  - name: ğŸ  æ¼ç½‘ä¹‹é±¼
    type: select
    proxies:
      - ğŸŒ å›½é™…äº’è”
      - ğŸ“¡ ç›´è¿å›½å†…    
  - name: ğŸš« æ‹¦æˆªé˜»æ–­
    type: select
    proxies:
      - REJECT 
  - name: ğŸ“¡ ç›´è¿å›½å†…
    type: select
    proxies:
      - DIRECT
#  - name: ğŸ® æ¸¸æˆåŠ é€Ÿ
#    type: select
#    use:   
#      - ğŸ‡­ğŸ‡° é¦™æ¸¯                      #å¼•ç”¨ï¼ˆä»£ç†é›†æ–‡ä»¶ï¼‰
#      - ğŸ‡°ğŸ‡· éŸ©å›½
#      - ğŸ‡ºğŸ‡¸ ç¾å›½
#      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬ 
#      - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡
#      - ğŸ‡¨ğŸ‡³ å°æ¹¾
#    proxies:
#      - ğŸ“¡ ç›´è¿å›½å†…    
  - name: ğŸ¤Ÿ æ‰‹åŠ¨é€‰æ‹©
    type: select
    use:
      - ğŸ‡­ğŸ‡° é¦™æ¸¯                      #å¼•ç”¨ï¼ˆä»£ç†é›†æ–‡ä»¶ï¼‰
      - ğŸ‡°ğŸ‡· éŸ©å›½
      - ğŸ‡ºğŸ‡¸ ç¾å›½
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬
      - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡
      - ğŸ‡¨ğŸ‡³ å°æ¹¾
  - name: ğŸ‡°ğŸ‡· éŸ©å›½
    type: url-test
    use:
      - ğŸ‡°ğŸ‡· éŸ©å›½
    url: http://cp.cloudflare.com/generate_204
    tolerance: 10
    interval: 300
  - name: ğŸ‡­ğŸ‡° é¦™æ¸¯
    type: url-test
    use:
      - ğŸ‡­ğŸ‡° é¦™æ¸¯
    url: http://cp.cloudflare.com/generate_204
    tolerance: 10
    interval: 300
  - name: ğŸ‡ºğŸ‡¸ ç¾å›½
    type: url-test
    use:
      - ğŸ‡ºğŸ‡¸ ç¾å›½
    url: http://cp.cloudflare.com/generate_204
    tolerance: 10
    interval: 300
  - name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬
    type: url-test
    use:
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬
    url: http://cp.cloudflare.com/generate_204
    tolerance: 10
    interval: 300   
  - name: ğŸ‡¨ğŸ‡³ å°æ¹¾
    type: url-test
    use:
      - ğŸ‡¨ğŸ‡³ å°æ¹¾
    url: http://cp.cloudflare.com/generate_204
    tolerance: 10
    interval: 300     
  - name: ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡
    type: url-test
    use:
      - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡
    url: http://cp.cloudflare.com/generate_204
    tolerance: 10
    interval: 300       
# clashæœ‰å‡ ç§ç­–ç•¥ï¼Œurl-testè‡ªåŠ¨æµ‹é€Ÿï¼Œselectæ‰‹åŠ¨é€‰æ‹©ï¼Œselectä¸»å¤‡åˆ‡æ¢ï¼Œloadbalanceè½®è¯¢å‡è¡¡ï¼Œrelayä¸­ç»§æ¨¡å¼ï¼Œæ¯ä¸ªéƒ½æœ‰ä»–çš„ä¼˜åŠ£
# url-testè‡ªåŠ¨æµ‹é€Ÿ: è‡ªåŠ¨æµ‹é€Ÿï¼Œæˆ‘ç”¨çš„æœ€å¤šï¼Œæ¯éš”ä¸€æ®µæ—¶é—´ï¼ŒèŠ‚ç‚¹è‡ªåŠ¨å‘æµ‹é€Ÿç‚¹å‘èµ·è¿æ¥æµ‹é€Ÿï¼Œç„¶åè‡ªåŠ¨é€‰æ‹©ä¸€ä¸ªå»¶è¿Ÿæœ€ä½çš„ï¼Œä½†è¿™ä¸ªä¸æ˜¯æœ¬åœ°åˆ°èŠ‚ç‚¹ï¼Œè€Œæ˜¯èŠ‚ç‚¹åˆ°æµ‹é€Ÿç‚¹.
# selectæ‰‹åŠ¨é€‰æ‹©: æ‰‹åŠ¨é€‰æ‹©ï¼Œé¡¾åæ€ä¹‰ï¼Œæ‰‹åŠ¨ï¼Œä¸ä¼šè‡ªåŠ¨åˆ‡æ¢.
# selectä¸»å¤‡åˆ‡æ¢: ä¸»å¤‡åˆ‡æ¢ï¼ŒèŠ‚ç‚¹å…ˆå‘èµ·æµ‹é€Ÿï¼Œç„¶åé€‰æ‹©ç¬¬ä¸€ä¸ªå¯ç”¨çš„èŠ‚ç‚¹ï¼Œä¸€å®šæ—¶é—´å†…åœ¨æµ‹é€Ÿï¼Œå¦‚æœé€‰æ‹©çš„èŠ‚ç‚¹æŒ‚äº†ï¼Œå°±é¡ºä½æ¢ï¼Œä¸æŒ‚å°±ç»§ç»­ç”¨ï¼Œä½†ä¸è€ƒè™‘å»¶è¿Ÿ.
# loadbalanceè½®è¯¢å‡è¡¡: è½®è®­å‡è¡¡ï¼Œè·Ÿè´Ÿè½½å‡è¡¡å·®ä¸å¤šï¼Œä½†æ²¡ä»€ä¹ˆç”¨.
# relayä¸­ç»§æ¨¡å¼: ä¸­ç»§æ¨¡å¼ï¼Œå°±æ˜¯å¯ä»¥è‡ªå®šä¹‰å¤šä¸ªèŠ‚ç‚¹çš„ä¸­ç»§è¡Œä¸º 
#è§„åˆ™é›†
rule-providers:
## > å»å¹¿å‘Š
  AdBlock1:                                   # è§„åˆ™é›†æ–‡ä»¶å
    type: http                                # è§„åˆ™é›†æ–‡ä»¶ç±»å‹ï¼ˆHTTP=åœ¨çº¿ä¸‹è½½ï¼›File=æœ¬åœ°å¯¼å…¥ï¼‰
    behavior: classical                       # è¡Œä¸ºåŸŸ
    path: ./ruleset/å¹¿å‘Šæ‹¦æˆª/AdBlock1.list     # è§„åˆ™é›†åœ¨çº¿ä¸‹è½½ä¿å­˜åœ°å€æˆ–æœ¬åœ°æ–‡ä»¶å¯¼å…¥åœ°å€
    url: https://git.o8.cx/https://raw.githubusercontent.com/clash1step/rule-provider/master/%e5%b9%bf%e5%91%8a%e6%8b%a6%e6%88%aa/AdBlock1.list  #è§„åˆ™é›†æ–‡ä»¶ä¸‹è½½åœ°å€
    interval: 43200                           # è§„åˆ™é›†æ–‡ä»¶è‡ªåŠ¨æ›´æ–°é—´éš”
  AdBlock2:
    type: http
    behavior: classical
    path: ./ruleset/å¹¿å‘Šæ‹¦æˆª/AdBlock2.list
    url: https://git.o8.cx/https://raw.githubusercontent.com/clash1step/rule-provider/master/%e5%b9%bf%e5%91%8a%e6%8b%a6%e6%88%aa/AdBlock2.list
    interval: 43200
  AdBlock3:
    type: http
    behavior: classical
    path: ./ruleset/å¹¿å‘Šæ‹¦æˆª/AdBlock3.list
    url: https://git.o8.cx/https://raw.githubusercontent.com/clash1step/rule-provider/master/%e5%b9%bf%e5%91%8a%e6%8b%a6%e6%88%aa/AdBlock3.list
    interval: 43200
  AdBlock4:
    type: http
    behavior: classical
    path: ./ruleset/å¹¿å‘Šæ‹¦æˆª/AdBlock4.list
    url: https://git.o8.cx/https://raw.githubusercontent.com/clash1step/rule-provider/master/%E5%B9%BF%E5%91%8A%E6%8B%A6%E6%88%AA/AdBlock4.list
    interval: 43200
  AdBlock5:
    type: http
    behavior: classical
    path: ./ruleset/å¹¿å‘Šæ‹¦æˆª/AdBlock5.list
    url: https://git.o8.cx/https://raw.githubusercontent.com/clash1step/rule-provider/master/%e5%b9%bf%e5%91%8a%e6%8b%a6%e6%88%aa/AdBlock5.list
    interval: 43200
## > åª’ä½“æœåŠ¡
  # > æ²¹ç®¡
  YouTube:
    type: http
    behavior: classical
    path: ./ruleset/åª’ä½“æœåŠ¡/YouTube.list
    url: https://git.o8.cx/https://raw.githubusercontent.com/clash1step/rule-provider/master/%E5%AA%92%E4%BD%93%E6%9C%8D%E5%8A%A1/YouTube.list
    interval: 43200
  # > å¥ˆé£
  Netflix:
    type: http
    behavior: classical
    path: ./ruleset/åª’ä½“æœåŠ¡/Netflix.list
    url: https://git.o8.cx/https://raw.githubusercontent.com/clash1step/rule-provider/master/%E5%AA%92%E4%BD%93%E6%9C%8D%E5%8A%A1/Netflix.list
    interval: 43200
  # > è¿ªå£«å°¼+
  Disney:
    type: http
    behavior: classical
    path: ./ruleset/åª’ä½“æœåŠ¡/Disney.list
    url: https://git.o8.cx/https://raw.githubusercontent.com/clash1step/rule-provider/master/%E5%AA%92%E4%BD%93%E6%9C%8D%E5%8A%A1/Disney.list
    interval: 43200
  # > HBO
  HBO:
    type: http
    behavior: classical
    path: ./ruleset/åª’ä½“æœåŠ¡/HBO.list
    url: https://git.o8.cx/https://raw.githubusercontent.com/clash1step/rule-provider/master/%E5%AA%92%E4%BD%93%E6%9C%8D%E5%8A%A1/HBO.list
    interval: 43200
  # > æ¸¯æ¾³å°åª’ä½“
  HMTmedia:
    type: http
    behavior: classical
    path: ./ruleset/åª’ä½“æœåŠ¡/HMTmedia.list
    url: https://git.o8.cx/https://raw.githubusercontent.com/clash1step/rule-provider/master/%E5%AA%92%E4%BD%93%E6%9C%8D%E5%8A%A1/HMTmedia.list
    interval: 43200
  # > æ²¹ç®¡éŸ³ä¹   
  YoutubeMusic:
    type: http
    behavior: classical
    path: ./ruleset/åª’ä½“æœåŠ¡/YoutubeMusic.list
    url: https://git.o8.cx/https://raw.githubusercontent.com/clash1step/rule-provider/master/%E5%AA%92%E4%BD%93%E6%9C%8D%E5%8A%A1/YoutubeMusic.list
    interval: 43200
  # > Apple TV
  AppleTV:
    type: http
    behavior: classical
    path: ./ruleset/åª’ä½“æœåŠ¡/AppleTV.list
    url: https://git.o8.cx/https://raw.githubusercontent.com/clash1step/rule-provider/master/%e5%aa%92%e4%bd%93%e6%9c%8d%e5%8a%a1/AppleTV.list
    interval: 43200
  # > å…¶ä½™å›½é™…æµåª’ä½“
  GlobalMedia:
    type: http
    behavior: classical
    path: ./ruleset/åª’ä½“æœåŠ¡/GlobalMedia.list
    url: https://git.o8.cx/https://raw.githubusercontent.com/clash1step/rule-provider/master/%E5%AA%92%E4%BD%93%E6%9C%8D%E5%8A%A1/GlobalMedia.list
    interval: 43200
  # > å›½å†…æµåª’ä½“
  Chinesemedia:
    type: http
    behavior: classical
    path: ./ruleset/åª’ä½“æœåŠ¡/Chinesemedia.list
    url: https://git.o8.cx/https://raw.githubusercontent.com/clash1step/rule-provider/master/%E5%AA%92%E4%BD%93%E6%9C%8D%E5%8A%A1/Chinesemedia.list
    interval: 43200
  # ç½‘æ˜“äº‘
  wyy:
    type: http
    behavior: classical
    path: ./ruleset/åª’ä½“æœåŠ¡/wyy.list
    url: https://git.o8.cx/https://raw.githubusercontent.com/clash1step/rule-provider/master/%E5%AA%92%E4%BD%93%E6%9C%8D%E5%8A%A1/wyy.list
    interval: 43200    
## > ç½‘ç»œæœåŠ¡
  # > è‹¹æœæœåŠ¡
  # è‹¹æœAPI
  AppleAPI:
    type: http
    behavior: classical
    path: ./ruleset/ç½‘ç»œæœåŠ¡/AppleAPI.list
    url: https://git.o8.cx/https://raw.githubusercontent.com/clash1step/rule-provider/master/%e7%bd%91%e7%bb%9c%e6%9c%8d%e5%8a%a1/AppleAPI.list
    interval: 43200
  # è‹¹æœCDN
  AppleCDN:
    type: http
    behavior: classical
    path: ./ruleset/ç½‘ç»œæœåŠ¡/AppleCDN.list
    url: https://git.o8.cx/https://raw.githubusercontent.com/clash1step/rule-provider/master/%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1/AppleCDN.list
    interval: 43200
  # è°·æ­ŒæœåŠ¡
  Google:
    type: http
    behavior: classical
    path: ./ruleset/ç½‘ç»œæœåŠ¡/Google.list
    url: https://git.o8.cx/https://raw.githubusercontent.com/clash1step/rule-provider/master/%e7%bd%91%e7%bb%9c%e6%9c%8d%e5%8a%a1/Google.list
    interval: 43200
  # > è°·æ­ŒCDN
  GoogleCDN:
    type: http
    behavior: classical
    path: ./ruleset/ç½‘ç»œæœåŠ¡/GoogleCDN.list
    url: https://git.o8.cx/https://raw.githubusercontent.com/clash1step/rule-provider/master/%e7%bd%91%e7%bb%9c%e6%9c%8d%e5%8a%a1/GoogleCDN.list
    interval: 43200
  # å¾®è½¯æœåŠ¡
  Microsoft:
    type: http
    behavior: classical
    path: ./ruleset/ç½‘ç»œæœåŠ¡/Microsoft.list
    url: https://git.o8.cx/https://raw.githubusercontent.com/clash1step/rule-provider/master/%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1/Microsoft.list
    interval: 43200
  # > å¾®è½¯CDN
  MicrosoftCDN:
    type: http
    behavior: classical
    path: ./ruleset/ç½‘ç»œæœåŠ¡/MicrosoftCDN.list
    url: https://git.o8.cx/https://raw.githubusercontent.com/clash1step/rule-provider/master/%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1/MicrosoftCDN.list
    interval: 43200
  # æ•°å­—è´§å¸
  Digital:
    type: http
    behavior: classical
    path: ./ruleset/ç½‘ç»œæœåŠ¡/Digital.list
    url: https://git.o8.cx/https://raw.githubusercontent.com/clash1step/rule-provider/master/%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1/Digital.list
    interval: 43200    
  # Paypal
  Paypal:
    type: http
    behavior: classical
    path: ./ruleset/ç½‘ç»œæœåŠ¡/Paypal.list
    url: https://git.o8.cx/https://raw.githubusercontent.com/clash1step/rule-provider/master/%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1/Paypal.list
    interval: 43200
  # Speedtest
  Speedtest:
    type: http
    behavior: classical
    path: ./ruleset/ç½‘ç»œæœåŠ¡/Speedtest.list
    url: https://git.o8.cx/https://raw.githubusercontent.com/clash1step/rule-provider/master/%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1/Speedtest.list
    interval: 43200
  # å³æ—¶é€šè®¯ï¼ˆTG,KAKAO,LINE....)
  Telegram:
    type: http
    behavior: classical
    path: ./ruleset/ç½‘ç»œæœåŠ¡/Telegram.list
    url: https://git.o8.cx/https://raw.githubusercontent.com/clash1step/rule-provider/master/%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1/Telegram.list
    interval: 43200
  # æ¸¸æˆå¹³å°ï¼ˆSteam,xbox,PS,æˆ˜ç½‘ï¼‰
  gameline:
    type: http
    behavior: classical
    path: ./ruleset/ç½‘ç»œæœåŠ¡/gameline.list
    url: https://git.o8.cx/https://raw.githubusercontent.com/clash1step/rule-provider/master/%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1/gameline.list
    interval: 43200
  # > å›å›½çº¿è·¯ 
  Domestic:
    type: http
    behavior: classical
    path: ./ruleset/ç½‘ç»œæœåŠ¡/Domestic.list
    url: https://git.o8.cx/https://raw.githubusercontent.com/clash1step/rule-provider/master/%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1/Domestic.list
    interval: 43200
  Lan:
    type: http
    behavior: classical
    path: ./ruleset/ç½‘ç»œæœåŠ¡/Lan.list
    url: https://git.o8.cx/https://raw.githubusercontent.com/clash1step/rule-provider/master/%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1/Lan.list
    interval: 43200
  # > å›½é™…äº’è”
  Proxy:
    type: http
    behavior: classical
    path: ./ruleset/ç½‘ç»œæœåŠ¡/Proxy.list
    url: https://git.o8.cx/https://raw.githubusercontent.com/clash1step/rule-provider/master/%e7%bd%91%e7%bb%9c%e6%9c%8d%e5%8a%a1/Proxy.list
    interval: 43200
## > é»‘ç™½åå•
  # > é»‘åå•
  Black:
    type: http
    behavior: classical
    path: ./ruleset/é»‘ç™½åå•/Black.list
    url: https://git.o8.cx/https://raw.githubusercontent.com/clash1step/rule-provider/master/%E9%BB%91%E7%99%BD%E5%90%8D%E5%8D%95/Black.list
    interval: 43200
  # > ç™½åå•
  White:
    type: http
    behavior: classical
    path: ./ruleset/é»‘ç™½åå•/White.list
    url: https://git.o8.cx/https://raw.githubusercontent.com/clash1step/rule-provider/master/%E9%BB%91%E7%99%BD%E5%90%8D%E5%8D%95/White.list
    interval: 43200
# ScriptåŒ¹é…æ¨¡å¼
script:
    code: |
    
        def main(ctx, metadata):
        ## >> è‡ªå®šä¹‰å˜é‡
            # æ¸¸æˆä¸»æœºç­–ç•¥               
            #SrcIP = ctx.resolve_ip(metadata["src_ip"])
            #if SrcIP == "10.10.10.14":
                #if metadata["network"] == "udp":
                    #ctx.log('[Script] matched SrcIP')
                    #return "ğŸ® æ¸¸æˆåŠ é€Ÿ"
                #return "ğŸŒ å›½é™…äº’è”"
                
            # å¹¿å‘Šæ‹¦æˆªç­–ç•¥
            ad_action = {
                "Speedtest": "ğŸ“¶ å¸¦å®½æµ‹é€Ÿ",
                "AdBlock1": "â›”ï¸ æ‹¦æˆªå¹¿å‘Š",
                "AdBlock2": "â›”ï¸ æ‹¦æˆªå¹¿å‘Š",
                "AdBlock3": "â›”ï¸ æ‹¦æˆªå¹¿å‘Š",
                "AdBlock4": "â›”ï¸ æ‹¦æˆªå¹¿å‘Š",
                "AdBlock5": "â›”ï¸ æ‹¦æˆªå¹¿å‘Š"
                }
            ad_rule = ["Speedtest","AdBlock1", "AdBlock2", "AdBlock3", "AdBlock4", "AdBlock5"]
            for ad_name in ad_rule:
                if ctx.rule_providers[ad_name].match(metadata):
                    ctx.log('[Script] matched %s' % ad_name)
                    return ad_action[ad_name]
                    
            # Plexç­–ç•¥
            #plex_direct = ["+.plex.direct"]
            #plex_tv = ["+.plex.tv"]
            #for hostname in plex_direct:
                #if hostname in metadata["host"]:
                    #ctx.log('[Script] matched %s' % hostname)
                    #return "ğŸ˜å›å®¶"
            #for hostname in plex_tv:
                #if hostname in metadata["host"]:
                    #ctx.log('[Script] matched %s' % hostname)
                    #return "ğŸŒ å›½é™…äº’è”"
          
            # å®šä¹‰è§„åˆ™é›†ä¸ç­–ç•¥ç»„
            ruleset_action = {
                "Lan": "ğŸ“¡ ç›´è¿å›½å†…",
                "White": "ğŸ“¡ ç›´è¿å›½å†…",
                "Black": "ğŸŒ å›½é™…äº’è”",
                "Telegram": "ğŸ’¬ å³æ—¶é€šè®¯",
                "YouTube": "â–¶ï¸ Youtube",
                "Netflix": "ğŸ¦ Netflix",
                "HMTmedia": "ğŸ“º æ¸¯æ¾³å°åŒº",
                "Disney": "ğŸ Disney",
                "YoutubeMusic": "ğŸ å›½é™…åª’ä½“",
                "HBO": "ğŸ å›½é™…åª’ä½“",
                "AppleTV": "ğŸ å›½é™…åª’ä½“",
                "GlobalMedia": "ğŸ å›½é™…åª’ä½“", 
                "gameline": "ğŸ® æ¸¸æˆå¹³å°",               
                "Digital": "ğŸŒ å›½é™…äº’è”",
                "Paypal": "ğŸŒ å›½é™…äº’è”",
                "Proxy": "ğŸŒ å›½é™…äº’è”",
                "wyy": "ğŸ¥ å›½å†…åª’ä½“",
                "Chinesemedia": "ğŸ¥ å›½å†…åª’ä½“",
                "AppleAPI": "ğŸ“± è‹¹æœæœåŠ¡",
                "Google": "ğŸŒ è°·æ­ŒæœåŠ¡",
                "GoogleCDN": "ğŸŒ è°·æ­ŒæœåŠ¡",
                "Microsoft": "ğŸ“§ å¾®è½¯æœåŠ¡",
                "AppleCDN": "ğŸ“¡ ç›´è¿å›½å†…",                  
                "MicrosoftCDN": "ğŸ“¡ ç›´è¿å›½å†…",            
                "Domestic": "ğŸ“¡ ç›´è¿å›½å†…"
                }
            name_rule = ["Lan","White","Black","Telegram","YouTube","Netflix","HMTmedia","Disney","YoutubeMusic","HBO","AppleTV","GlobalMedia","gameline","Google","Digital","Paypal","Proxy","wyy","Chinesemedia","AppleAPI","GoogleCDN","Microsoft","AppleCDN","MicrosoftCDN","Domestic"]
            # ç­–ç•¥ç»„è§„åˆ™
            for rule_name in name_rule:
                if ctx.rule_providers[rule_name].match(metadata):
                    ctx.log('[Script] matched %s' % rule_name)
                    return ruleset_action[rule_name]              
            # æ¼ç½‘ä¹‹é±¼
            return "ğŸ  æ¼ç½‘ä¹‹é±¼"